<style>
    .clearfix:after,.clearfix:before{
        content: "";
        display: table;
    }
    .clearfix:after{
        clear: both;
    }
    .clearfix{
        *zoom: 1;
        padding-top: 5px;
    }
    .clearfix button{
        height: 38px;
        line-height: 38px;
        text-align: center;
    }
    .switch{
        width: 70px;
        margin-left: 10px;
    }
</style>
<div style="padding: 30px;" class="layui-form" lay-filter="add_freepackage"> <!-- 提示：如果你不想用form，你可以换成div等任何一个普通元素 -->

    <div class="layui-form-item">
        <label class="layui-form-label"><i class="required-color">*</i> 套餐名称：</label>
        <div class="layui-input-inline seller-inline-4">
            <input type="text" name="name" required lay-verify="required" placeholder="请输入套餐名称" autocomplete="off" class="layui-input">
        </div>
    </div>

    <div class="layui-inline">
        <label class="layui-form-label">效果图：</label>
        <div class="layui-input-inline">
            {Jshop:image id="image" name="image"}
        </div>
    </div>

    <div class="layui-form-item">
        <label class="layui-form-label">启用状态：</label>
        <div class="layui-input-block">
            <input type="checkbox" name="status" lay-skin="switch" checked  value="1" lay-text="启用|禁用">
        </div>
    </div>
    <!--<div class="layui-form-item">-->
        <!--<label class="layui-form-label">起止时间：</label>-->
        <!--<div class="layui-input-inline seller-inline-6">-->
            <!--<input  type="text" name="date" value="" id="date" placeholder="请输入起止时间" autocomplete="off" class="layui-input">-->
        <!--</div>-->
    <!--</div>-->
    <div class="layui-form-item " id="father">
    </div>
    <div class="layui-form-item" id="add-goods">
        <label class="layui-form-label">添加商品：</label>
        <button type="button" class="layui-btn layui-btn-primary layui-btn-sm add-goods">
            <i class="layui-icon">&#xe654;</i>
        </button>
    </div>
</div>

<script>
    var i = {$k|default='1'};
    $("#add-goods").on("click", ".add-goods", function () {
        i++;
        var element = '<div id="element" class="clearfix">' +
            '<label class="layui-form-label"><span style="color: red;">*</span>商品：</label>' +
            '<div class="pro clearfix">' +
            '<div class="layui-input-inline seller-inline-7">' +
            '<select name="goods[' + [i] + '][product_id]" lay-verify="" lay-search>' +
            '<option value="">根据商品ID、名称、编号搜索</option>' +
            // '{volist name=":model('app\common\model\Goods')->select()" id="val"}' +
            '{volist name=":model('app\common\model\Goods')->productsList()" id="val"}' +
        '<option value="{$val.product_id}">货品编号：{$val.sn}，商品名称：'+"{$val.name|mb_substr=0,20}"+'，商品编号：'+"{$val.bn}"+'</option>' +
        '{/volist}' +
        '</select>' +
        '</div>' +
        ' <div class="switch layui-input-inline seller-inline-2">' +
        '<input type="checkbox" name="goods[' + [i] + '][type]" lay-skin="switch" value="0" lay-text="付费|免费" checked>'+
        '</div>' +
        ' <div class="layui-input-inline seller-inline-2">' +
        '<div class="layui-btn-group">' +
        '<button type="button" class="layui-btn layui-btn-primary layui-btn-sm del" >' +
        '<i class="layui-icon">&#xe640;</i>' +
        ' </button>' +
        '</div>' +
        '</div></div>'
        $("#father").append(element)

        layui.form.render('select')
        layui.form.render('checkbox')

    })
    $("#father").on("click", ".del", function () {
        $(this).parents("#element").remove();
    })
    layui.use(['form','laydate'], function(){
        layui.form.render();
        //时间插件
        layui.laydate.render({
            elem: '#date',
            range: '到',
            type: 'datetime',
            trigger: 'click' //自动弹出控件的事件，采用click弹出
        });
    });
</script>